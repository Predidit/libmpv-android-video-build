diff --git a/src/glsl/spirv_shaderc.c b/src/glsl/spirv_shaderc.c
index e384382..064f128 100644
--- a/src/glsl/spirv_shaderc.c
+++ b/src/glsl/spirv_shaderc.c
@@ -86,8 +86,16 @@ static pl_str shaderc_compile(pl_spirv spirv, void *alloc,
     shaderc_compile_options_set_optimization_level(opts,
             shaderc_optimization_level_performance);
     shaderc_compile_options_set_target_spirv(opts, spirv->version.spv_version);
-    shaderc_compile_options_set_target_env(opts, shaderc_target_env_vulkan,
-                                                 spirv->version.env_version);
+    
+    // shaderc (r27c) only supports up to vulkan 1.3
+    uint32_t env_ver = spirv->version.env_version;
+    if (env_ver > VK_API_VERSION_1_3) {
+        PL_WARN(spirv, "shaderc does not support vulkan %d.%d, falling back to vulkan 1.3",
+                VK_API_VERSION_MAJOR(env_ver), VK_API_VERSION_MINOR(env_ver));
+        env_ver = VK_API_VERSION_1_3;
+    }
+    
+    shaderc_compile_options_set_target_env(opts, shaderc_target_env_vulkan, env_ver);
 
     for (int i = 0; i < 3; i++) {
         shaderc_compile_options_set_limit(opts,
